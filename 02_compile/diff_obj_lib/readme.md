# オブジェクトファイルとライブラリファイルの違い

C言語のソースファイルをコンパイルするとオブジェクトファイルが出来る。
また、コンパイルオプションでライブラリを作成することも出来る。

オブジェクトファイルもライブラリファイルもどちらも機械語を含んだバイナリファイルである。

ライブラリファイルはオブジェクトファイルをまとめたものだが、単純に並べて一つにした
だけのものなのか、なにか追加・修正されているのか？確かめてみる。

## キーワード：
 - オブジェクトファイルフォーマット：ELF, Mach-O, PE
 - セクション、セグメント、リンカ、ローダ、
 - シンボルテーブル、シンボルテーブルの索引（インデックス）

# オブジェクトファイルの生成
サンプルとして用意したC言語のソースコードはこれ。

```C
int foo(int x){
	int a = 2;
	return a+x;
}

int bar(int y){
	const int b=3;
	return b*3;
}

```

``

# ライブラリファイルの生成

# オブジェクトファイルとライブラリファイルの比較

## シンボルテーブル

## シンボルテーブルの索引

# バイナリファイルのダンプ

# バイナリダンプの比較

# 結論

# 宿題
シンボルテーブルの索引はハッシュテーブルらしいのだが、
関数名からそのアドレスを検索できるようになっているはず。
関数名 foo とそのアドレスが、索引のどこにあるのか、バイナリレベルで
確認したい。

ハッシュ関数自体は調べる気はないが、関数名やおそらく変数名も
管理されているはず。変数を追加して、索引部分がどう変わるのか、
バイナリダンプして調べれば、対応関係がわかるはず。
関数や変数のアドレスは、objdump や nm でわかるはずなので。


